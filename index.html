<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Base64 ⇆ Bytes ⇆ Decimal ⇆ Bytes32 Converter</title>
<style>
    body { font-family: monospace; padding: 20px; background: #f4f4f4; }
    textarea, input { width: 100%; padding: 8px; margin: 6px 0; font-family: monospace; }
    button { padding: 8px 16px; margin: 4px 0; }
</style>
</head>
<body>

<h2>Base64 ⇆ Bytes ⇆ Decimal ⇆ Bytes32 Converter</h2>

<label>Base64:</label>
<textarea id="base64"></textarea>

<label>Bytes:</label>
<textarea id="bytes"></textarea>

<label>Decimal Array:</label>
<textarea id="decimal"></textarea>

<label>Bytes32 (0x...):</label>
<input id="bytes32" />

<div>
    <button onclick="base64ToBytes()">Base64 → Bytes</button>
    <button onclick="bytesToBase64()">Bytes → Base64</button>
    <button onclick="decimalToBytes32()">Decimal → Bytes32</button>
    <button onclick="bytes32ToDecimal()">Bytes32 → Decimal</button>
</div>

<script>
function base64ToBytes() {
    try {
        let b64 = document.getElementById('base64').value.trim();
        if (!b64) return;
        let bin = atob(b64);
        let bytes = [];
        for (let i = 0; i < bin.length; i++) {
            bytes.push(bin.charCodeAt(i));
        }
        document.getElementById('bytes').value = '0x' + bytes.map(b => b.toString(16).padStart(2, '0')).join('');
        document.getElementById('decimal').value = JSON.stringify(bytes);
    } catch (e) {
        alert("Error decoding Base64: " + e.message);
    }
}

function bytesToBase64() {
    try {
        let hex = document.getElementById('bytes').value.trim().replace(/^0x/, '');
        if (!/^[0-9a-fA-F]*$/.test(hex) || hex.length % 2 !== 0) {
            alert("Invalid hex input.");
            return;
        }
        let bin = '';
        for (let i = 0; i < hex.length; i += 2) {
            bin += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
        }
        document.getElementById('base64').value = btoa(bin);
    } catch (e) {
        alert("Error encoding to Base64: " + e.message);
    }
}

function decimalToBytes32() {
    try {
        let decArray = JSON.parse(document.getElementById('decimal').value);
        if (!Array.isArray(decArray)) {
            alert("Decimal input must be an array.");
            return;
        }
        if (decArray.some(n => n < 0 || n > 255)) {
            alert("Decimal values must be between 0 and 255.");
            return;
        }
        while (decArray.length < 32) decArray.unshift(0);
        if (decArray.length > 32) decArray = decArray.slice(-32);
        let hex = decArray.map(b => b.toString(16).padStart(2, '0')).join('');
        document.getElementById('bytes32').value = '0x' + hex;
        document.getElementById('bytes').value = '0x' + hex;
    } catch (e) {
        alert("Error converting Decimal to Bytes32: " + e.message);
    }
}

function bytes32ToDecimal() {
    try {
        let hex = document.getElementById('bytes32').value.trim().replace(/^0x/, '');
        if (!/^[0-9a-fA-F]{64}$/.test(hex)) {
            alert("Bytes32 must be exactly 64 hex characters.");
            return;
        }
        let arr = [];
        for (let i = 0; i < hex.length; i += 2) {
            arr.push(parseInt(hex.substr(i, 2), 16));
        }
        document.getElementById('decimal').value = JSON.stringify(arr);
        document.getElementById('bytes').value = '0x' + hex;
    } catch (e) {
        alert("Error converting Bytes32 to Decimal: " + e.message);
    }
}
</script>

</body>
</html>
