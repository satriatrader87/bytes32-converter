<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bytes & Bytes32 Converter — Two‑Way</title>
  <style>
    :root{--bg:#0f1720;--card:#0b1220;--muted:#9aa4b2;--accent:#6ee7b7;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071025 0%, #07182b 60%);color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:28px}
    .app{width:100%;max-width:980px;border-radius:12px;padding:22px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 30px rgba(2,6,23,0.6);backdrop-filter: blur(6px)}
    h1{margin:0 0 6px;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:18px}
    .card{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
    textarea{width:100%;min-height:88px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit;padding:10px;border-radius:8px;resize:vertical}
    .row{display:flex;gap:8px;align-items:center}
    button, .btn{background:linear-gradient(90deg,#0ea5a4,#60a5fa);color:#04293a;border:none;padding:8px 12px;border-radius:8px;font-weight:600;cursor:pointer}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
    .small{font-size:12px;padding:6px 8px}
    .result{background:var(--glass);padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);font-family:monospace;white-space:pre-wrap;color:#dff6ef}
    label{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .foot{margin-top:12px;color:var(--muted);font-size:12px}
    .full{grid-column:1/3}
    .sample{font-size:12px;color:var(--muted);margin-top:6px}

    @media (max-width:820px){.grid{grid-template-columns:1fr}.full{grid-column:auto}}
  </style>
</head>
<body>
  <main class="app" role="main">
    <header>
      <h1>Bytes & Bytes32 Converter — Two‑Way</h1>
      <p class="lead">Convert Base64, hex, and decimal arrays back and forth. Outputs hex with <code>0x</code> prefix for easy use in smart contracts.</p>
    </header>

    <section class="grid">
      <div class="card">
        <label>Base64 input</label>
        <textarea id="base64Input" placeholder="Paste Base64 here...">ABIG42uh3O3bDHOs5Cdtm7GSxM6Z+yvXX1s8HgRbyw37twAAAAAAAAAAAAAAACX52SFKhNzHYxFmESBhYtT5M2EXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnaoodqLqGAAA=</textarea>
        <div class="actions">
          <button onclick="toBytesFromBase64()">Base64 → Bytes (hex)</button>
          <button onclick="toBytes32FromBase64()" class="btn-ghost">Base64 → Bytes32 (hex)</button>
          <button onclick="copyText('base64BytesOut')" class="small">Copy Hex</button>
        </div>
        <div id="base64BytesOut" class="result" style="margin-top:8px">--</div>
      </div>

      <div class="card">
        <label>Hex / Bytes (input)</label>
        <textarea id="hexInput" placeholder="0x... or plain hex">0x001206e36ba1dceddb0c73ace4276d9bb192c4ce99fb2bd75f5b3c1e045bcb0dfbb700000000000000000000000025f9d9214a84dcc763116611206162d4f933611700000000000000000000000000000000000000000000000276a8a1da8ba860000</textarea>
        <div class="actions">
          <button onclick="hexToBase64()">Hex → Base64</button>
          <button onclick="hexToDecimal()" class="btn-ghost">Hex → Decimal array</button>
          <button onclick="copyText('hexToBase64Out')" class="small">Copy</button>
        </div>
        <div id="hexToBase64Out" class="result" style="margin-top:8px">--</div>
      </div>

      <div class="card">
        <label>Decimal array input</label>
        <textarea id="decimalInput" placeholder="[59,122,56,...] or 59,122,56,...">[59,122,56,59,227,40,123,202,234,153,13,237,78,230,3,199,172,45,1,197,242,58,55,58,19,31,212,153,103,149,181,63]</textarea>
        <div class="actions">
          <button onclick="decimalToBytes()">Decimal → Bytes (hex)</button>
          <button onclick="decimalToBytes32()" class="btn-ghost">Decimal → Bytes32 (hex)</button>
          <button onclick="copyText('decimalBytesOut')" class="small">Copy</button>
        </div>
        <div id="decimalBytesOut" class="result" style="margin-top:8px">--</div>
      </div>

      <div class="card">
        <label>Bytes32 / Hex input → Decimal</label>
        <textarea id="bytes32Input" placeholder="0x...">0x3b7a383be3287bcaea990ded4ee603c7ac2d01c5f23a373a131fd4996795b53f</textarea>
        <div class="actions">
          <button onclick="bytes32ToDecimal()">Bytes32 → Decimal array</button>
          <button onclick="bytes32ToBase64()" class="btn-ghost">Bytes32 → Base64</button>
          <button onclick="copyText('bytes32Out')" class="small">Copy</button>
        </div>
        <div id="bytes32Out" class="result" style="margin-top:8px">--</div>
      </div>

      <div class="card full">
        <label>Logs / Notes</label>
        <div class="result" id="log" style="min-height:64px">Ready — enter data and press a button. Outputs include <code>0x</code> prefix for hex results.</div>
        <div class="sample">Example decimal for bytes32: [0,0,0,0,0,0,0,0,0,0,0,0,168,81,83,153,49,125,138,115,133,58,161,178,98,27,46,103,87,203,175,104]</div>
      </div>
    </section>

    <div class="foot">Want this hosted on GitHub Pages? Create a repo, commit this index.html to root, then enable Pages (branch: main, folder: /). I'll help with README or repo name if you want.</div>
  </main>

  <script>
    // Utilities
    const log = (msg) => document.getElementById('log').textContent = msg;
    function normalizeHex(h){ if(!h) return ''; h = h.trim(); if(h.startsWith('0x')||h.startsWith('0X')) h = h.slice(2); return h.replace(/[^0-9a-fA-F]/g,''); }
    function bytesFromHex(hex){ hex = normalizeHex(hex); if(hex.length % 2 !== 0) throw new Error('hex length not even'); return Uint8Array.from(hex.match(/.{1,2}/g).map(b=>parseInt(b,16))); }
    function hexFromBytes(bytes){ return '0x' + Array.from(bytes).map(b=>b.toString(16).padStart(2,'0')).join(''); }
    function safeAtob(s){ try{return atob(s);}catch(e){throw new Error('invalid base64');} }

    // Base64 -> Bytes
    function toBytesFromBase64(){ try{ const v = document.getElementById('base64Input').value.trim(); const raw = safeAtob(v); const bytes = Uint8Array.from(raw, c=>c.charCodeAt(0)); document.getElementById('base64BytesOut').textContent = `Length: ${bytes.length} bytes\nHex: ${hexFromBytes(bytes)}`; log('Base64 decoded to bytes.'); }catch(e){ alert('Invalid Base64'); log('Error decoding base64'); } }

    // Base64 -> Bytes32
    function toBytes32FromBase64(){ try{ const v = document.getElementById('base64Input').value.trim(); const raw = safeAtob(v); const bytes = Uint8Array.from(raw, c=>c.charCodeAt(0)); if(bytes.length!==32) log(`Warning: decoded length ${bytes.length} (bytes32 expected 32)`); document.getElementById('base64BytesOut').textContent = `Hex: ${hexFromBytes(bytes)}`; log('Base64 decoded to hex (bytes32 mode).'); }catch(e){ alert('Invalid Base64'); log('Error decoding base64'); } }

    // Hex -> Base64
    function hexToBase64(){ try{ const hex = document.getElementById('hexInput').value; const bytes = bytesFromHex(hex); const str = String.fromCharCode(...bytes); const b64 = btoa(str); document.getElementById('hexToBase64Out').textContent = b64; log('Hex converted to base64.'); }catch(e){ alert('Invalid hex'); log('Error converting hex to base64'); } }

    // Hex -> Decimal
    function hexToDecimal(){ try{ const hex = document.getElementById('hexInput').value; const bytes = bytesFromHex(hex); document.getElementById('hexToBase64Out').textContent = '[' + Array.from(bytes).join(',') + ']'; log('Hex converted to decimal array.'); }catch(e){ alert('Invalid hex'); log('Error converting hex to decimal'); } }

    // Decimal -> Bytes
    function parseDecimalInputField(id){ const raw = document.getElementById(id).value.trim(); const cleaned = raw.replace(/\[|\]/g,'').trim(); if(cleaned==='') return []; const parts = cleaned.split(',').map(s=>s.trim()).filter(s=>s.length>0); const nums = parts.map(p=>{ const n = Number(p); if(Number.isNaN(n) || n<0 || n>255) throw new Error('invalid decimal element: '+p); return n; }); return Uint8Array.from(nums); }
    function decimalToBytes(){ try{ const bytes = parseDecimalInputField('decimalInput'); document.getElementById('decimalBytesOut').textContent = `Length: ${bytes.length} bytes\nHex: ${hexFromBytes(bytes)}`; log('Decimal array → bytes (hex).'); }catch(e){ alert(e.message); log('Error parsing decimal input'); } }

    // Decimal -> Bytes32
    function decimalToBytes32(){ try{ const bytes = parseDecimalInputField('decimalInput'); if(bytes.length !== 32) log('Warning: decimal array length is '+bytes.length+' (bytes32 expected 32)'); document.getElementById('decimalBytesOut').textContent = hexFromBytes(bytes); log('Decimal array → bytes32 (hex).'); }catch(e){ alert(e.message); log('Error parsing decimal input'); } }

    // Bytes32 -> Decimal
    function bytes32ToDecimal(){ try{ const hex = document.getElementById('bytes32Input').value; const bytes = bytesFromHex(hex); document.getElementById('bytes32Out').textContent = '[' + Array.from(bytes).join(',') + ']'; log('Bytes32 → decimal array'); }catch(e){ alert('Invalid hex'); log('Error converting bytes32 to decimal'); } }

    // Bytes32 -> Base64
    function bytes32ToBase64(){ try{ const hex = document.getElementById('bytes32Input').value; const bytes = bytesFromHex(hex); const str = String.fromCharCode(...bytes); const b64 = btoa(str); document.getElementById('bytes32Out').textContent = b64; log('Bytes32 → base64'); }catch(e){ alert('Invalid hex'); log('Error converting bytes32 to base64'); } }

    function copyText(id){ const el = document.getElementById(id); if(!el) return; const text = el.textContent; navigator.clipboard.writeText(text).then(()=>{ log('Copied to clipboard'); }, ()=>{ alert('Copy failed — select and copy manually'); }); }

    // Initialize sample outputs on load
    (function(){ try{ toBytesFromBase64(); hexToBase64(); decimalToBytes(); bytes32ToDecimal(); }catch(e){} })();
  </script>
</body>
</html>
